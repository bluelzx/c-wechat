<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<title>380优惠券 - 添加优惠券</title>
<meta name="description" content="overview &amp; stats" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<link rel="stylesheet"
	href="${webroot}/assets/css/bootstrap-datetimepicker.min.css" />
<script charset="utf-8"
	src="${webroot}/assets/third/kindeditor/kindeditor-all-min.js"></script>
<script charset="utf-8"
	src="${webroot}/assets/third/kindeditor/lang/zh-CN.js"></script>
<link rel="stylesheet"
	href="${webroot}/assets/third/kindeditor/themes/default/default.css" />
<link rel="stylesheet"
	href="${webroot}/assets/third/kindeditor/themes/simple/simple.css" />
<link rel="stylesheet" href="${webroot}/assets/css/upload.css" />
<#include "commonHead.html">
<style>
hr {
	height: 1px;
	border: none;
	border-top: 2px solid #555555;
}

.imageFileCss {
	padding: 0px 0px;
}

.fileupload .inputCss {
	padding: 6px 0px;
}

#productInfoImg img {
	max-height: 100px;
	max-width: 160px;
}

.required {
	color: red;
	font-size: small;
}
</style>
</head>

<body class="no-skin" style="background-color: #FFF;">
	<div class="page-content">
		<div class="page-header">
			<h1>
				活动管理 <small> <i class="ace-icon fa fa-angle-double-right"></i>
					<#if discountCouponNew?? && discountCouponNew.id??> 修改活动 <#else>
					添加优惠券 </#if>
				</small>
			</h1>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<form id="couponformForm" class="form-horizontal" role="form"
					action="${adminPath}/activity/discount/saveDiscountCoupon" method="POST"
					enctype="multipart/form-data">
					<#if discountCouponNew?? && discountCouponNew.id??> <input
						type="hidden" id="id" name="id" value="${discountCouponNew.id}">
					</#if> 
					<h3 class="text-warning">优惠券信息</h3>
					<hr>
					<div class="form-group">
						<label class="col-sm-3 control-label no-padding-right"
							for="form-field-1"> <span class="required"></span>批次号：
						</label>
						<div class="col-sm-9">
							<input type="text" id="couponCodes" name="couponCodes" placeholder="请输入批次号"
								value="${discountCouponNew.couponCodes}" class="col-xs-10 col-sm-5">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label no-padding-right"
							for="form-field-1"> <span class="required"></span>券类型：
						</label>
						<div class="col-sm-9">
							<input type="text" id="name" name="name" placeholder="请输入券类型"
								value="${discountCouponNew.name}" class="col-xs-10 col-sm-5">
						<label class="col-sm-2 control-label no-padding-left"
							for="form-field-1"> <span class="required">如：门票抵用券，线路抵用券</span>
						</label>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label no-padding-right"
							for="form-field-1"> <span class="required"></span>券金额：
						</label>
						<div class="col-sm-9">
							<input type="text" id="couponMoney" name="couponMoney" placeholder="请输入券金额"
								value="${discountCouponNew.couponMoney}" class="col-xs-10 col-sm-4"> <label
								class="col-sm-0 control-label no-padding-left"
								for="form-field-1"> <strong class="text-danger"></strong>
								元
							</label>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label no-padding-right"
							for="form-field-1"> <span class="required"></span>使用条件：
						</label>
						<div class="col-sm-9">
							<input type="text" id="couponCondition" name="couponCondition" placeholder="请输入使用条件"
								value="${discountCouponNew.couponCondition}" class="col-xs-10 col-sm-5">
								<label class="col-sm-2 control-label no-padding-left"
							for="form-field-1"> <span class="required">如：满200元可用</span>
						</label>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label no-padding-right"
							for="form-field-1"> <span class="required"></span>有效期：
						</label>
						<div class="col-sm-9">
							<label class="col-sm-1 control-label no-padding-left"
								for="form-field-1">自领取日起</label> <input type="text" id="couponTime"
								name="couponTime" placeholder="请输入有效期" value="${discountCouponNew.couponTime}"
								class="col-xs-10 col-sm-3"> <label
								class="col-sm-0 control-label no-padding-left"
								for="form-field-1"> <strong class="text-danger"></strong>
								天
							</label>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label no-padding-right"
							for="form-field-1"> <span class="required"></span>URL：
						</label>
						<div class="col-sm-9">
							<input type="text" id="couponUrl" name="couponUrl" placeholder="请输入URL"
								value="${discountCouponNew.couponUrl}" class="col-xs-10 col-sm-5">
						</div>
					</div>
					<div class="clearfix form-actions">
							<div class="col-md-offset-4 col-md-8">
								<button id="submitBtn" class="btn btn-info" type="button">
									<i class="ace-icon fa fa-check bigger-110"></i>
									保存配置
								</button>
							</div>
						</div>
				</form>
			</div>
			<!-- /.col -->
		</div>
		<!-- /.row -->
	</div>

	<#include "commonFootJs.html">

	<!-- inline scripts related to this page -->
	<script src="${webroot}/assets/js/moment.min.js"></script>
	<script src="${webroot}/assets/js/bootstrap-datetimepicker.min.js"></script>
	<script src="${webroot}/assets/js/ajaxfileupload.js"></script>
	<script type="text/javascript">
		jQuery(function($) {

			$('#submitBtn').on(
					'click',
					function() {
						var couponMoney = $("#couponMoney").val();
						var couponTime = $("#couponTime").val();
						
						//数据合法性校验
					    if(isNaN(couponMoney)||couponMoney<=0||!(/^\d+$/.test(couponMoney))) {
							$("#couponMoney").focus();
							showMsg("请输入正确的券金额,只允许输入大于0的正整数!");
						}else if(isNaN(couponTime)||couponTime<=0||!(/^\d+$/.test(couponTime))) {
							$("#couponTime").focus();
							showMsg("请输入正确的有效期,只允许输入大于0的正整数!");
						}else { 
							$("#couponformForm").submit();
						} 
					});
		})
	</script>

</body>
</html>